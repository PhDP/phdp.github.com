<!doctype html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>

    <title>Automatic Revision of Ecological Theories</title>

    <meta name='description' content='Thesis defense'>
    <meta name='author' content='Philippe Desjardins-Proulx'>

    <meta name='apple-mobile-web-app-capable' content='yes' />
    <meta name='apple-mobile-web-app-status-bar-style' content='black-translucent' />

    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'>

    <link rel='stylesheet' href='css/reveal.min.css'>
    <link rel='stylesheet' href='css/theme/thesis.css' id='theme'>
    <link rel='stylesheet' href='lib/css/zenburn.css'>

    <script>
      if (window.location.search.match(/print-pdf/gi)) {
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'css/print/pdf.css';
        document.getElementsByTagName('head')[0].appendChild(link);
      }
    </script>

    <!--[if lt IE 9]>
    <script src='lib/js/html5shiv.js'></script>
    <![endif]-->
  </head>

  <body>

    <div class='reveal'>
      <!-- Any section element inside of this container is displayed as a slide -->
      <div class='slides'>
        <section>
          <section>
            <h1>Automatic Revision<br/> of Ecological Theories</h1>
            <p>by <a href='http://phdp.github.io/'>Philippe Desjardins-Proulx</a></small></p>
          </section>
        </section>
        <section>
          <section>
            <h1>Motivation</h1>
          </section>
          <section>
            <img src='img/amnat12.png' alt='amnat12'/>
          </section>
          <section>
            <img src='img/eco-evo-paper.png' alt='ecoevo'/>
          </section>
          <section>
            <img src='img/hahn08.png' alt='hahn08'/>
          </section>
          <section>
            <h2>Supervised learning</h2>
            <p>Given data points \(\mathcal{D} = \{(\mathbf{x}_i, y_i)\}_{i = 0}^{|\mathcal{D}| - 1}\), learn to predict \(y\) from \(\mathbf{x}\).</p>
            <p>Tasks: <i>classification, regression.</i></p>
            <br/>
            <h2>Unsupervised learning</h2>
            <p>Given data points \(\mathcal{D} = \{(\mathbf{x}_i)\}_{i = 0}^{|\mathcal{D}| - 1}\), learn some 'hidden structure'.</p>
            <p>Tasks: <i>matrix imputation, structure learning, clustering.</i></p>
            <br/>
            <p><i>Reference: Kevin Patrick Murphy. Machine Learning: a Probabilistic Perspective. MIT Press, 2012.</i></p>
          </section>
          <section>
            <img src='img/biorxiv-scientifictheories.png' alt='biorxiv'/>
          </section>
          <section>
            <h2>Relations. Uncertainty. Vagueness.</h2>
            <p><b>Domains</b>: species \(s, s_i, s_j \in S\), locations \(l \in L\), time \(t \in \mathbb{R}\).</p>
            <br/>
            \[\forall s_i, s_j: PhyloDistance(s_i, s_j) > 0, \infty.\]
            \[\forall s_i, s_j: \dot{x} = \alpha s_i - \beta s_is_j \mbox{ and } \dot{s_j} = \delta s_is_j - \gamma s_j, 0.01.\]
            \[\forall s_i, s_j: PPreyOn(s_i, s_j) = \alpha \times \exp\left[-\left(\frac{Ni(s_j) - Di(s_i)}{Range(s_i)/2}\right)^2\right], 1.02.\]
            \[\forall s, l, t: SmallN(s, l) \Rightarrow N(s,l,t+1) = G(s) \times N(s,l,t), 0.14.\]
            \[\forall s_i, s_j, l: KNN_5(s_i, s_j) > 0.5 \Rightarrow PreyOnAt(p, q, l), 2.5.\]
          </section>
        </section>
        <section>
          <section>
            <h1>Ecological Interactions</h1>
          </section>
          <section>
            <h2>Why interactions?</h2>
            <p>First reason: a key reason why selection is difficult to handle
            with traditional theories is because of the complexity of species
            interactions.</p>
            <br/>
            <p>Second reason: my lab is studying interactions. I had access to
            both good data-sets and people who understood them well.</p>
          </section>
          <section>
            <h2>Data</h2>
            <ul width='100%'>
              <li>Assembled by Isabelle Daigle, mostly from Digel et al. (2014).</li>
              <li>48 soil food webs.</li>
              <li>881 species.</li>
              <li>34 193 unique interactions.</li>
              <li>215 418 absence of interactions.</li>
              <li>3 real valued-traits: \(body mass\), \(Ph0\), \(Ph1\).</li>
              <li>25 binary traits (e.g. AboveGround, Detritivore, Bacteria, Jumps, LongLegs, UsePoison).</li>
            </ul>
          </section>
          <section>
            <img src='img/ecological-netflix-paper.png' alt='paper'/>
          </section>
          <section>
            <img src='img/pearson.svg' alt='pearson'/>
          </section>
          <section>
            <h2>Similarity measure</h2>
            \[tanimoto(\mathbf{x}, \mathbf{y}) = \frac{\left\vert\mathbf{x} \cap \mathbf{y}\right\vert}{\left\vert\mathbf{x} \cup \mathbf{y}\right\vert}.\]

<br/><br/>

\begin{align}
  tanimoto(\mathbf{x}, \mathbf{y}) &= \frac{\left\vert\{A, B, C\} \cap \{A, C, D, E, F\}\right\vert}{\left\vert\{A, B, C\} \cup \{A, C, D, E, F\}\right\vert}\\
                                   &= \frac{\left\vert\{A, C\}\right\vert}{\left\vert\{A, B, C, D, E, F\}\right\vert} = \frac{2}{6}.
\end{align}


          </section>
          <section>
            <h2>True Skill Statistic</h2>
            \[TSS = \frac{(tp \times tn) - (fp \times fn)}{(tp + fn)(fp + tn)}.\]

<br/><br/>

            <p><i>tp, tn, fp, fn</i> are the true positives, true negatives, false positives,
            and false negaties, respectively.</p>

            <p>The <i>TSS</i> ranges from -1 to 1.</p>
          </section>
          <section>
            <p>Supervised learning Random forests predict correctly 99.55% of
            the non-interactions and 96.81% of the interactions, for a
            <i>TSS</i> of 0.96.</p>

            <br/>

            <p>Removing the binary traits has little effect on the model. With
            only \(body mass\), \(Ph0\), \(Ph1\), the <i>TSS</i> of the random
            forest is 0.94.</p>
          </section>
          <section>
            <img src='img/knn-paper.png' alt='knn'/>
          </section>
          <section>
            <h2>I Bartomeus' pollinator-plant data-set</h2>
            <ul width='100%'>
              <li>Plant-pollinator interactions were collected across 16 sites in
              the southwest of the iberian peninsula (Huelva and Seville).</li>
              <li>65 pollinators.</li>
              <li>277 plants.</li>
              <li>739 pollinator-plant interactions.</li>
              <li>We randomly pick 739 pollinator-plant pairs that are not
              interacting to build a data-set of 1478 entries, half of
              interactions, half of non-interactions.</li>
            </ul>
          </section>
          <section>
            <h2>Accuracy</h2>
            <img src='img/ht_acc.svg' width='80%' alt='acc'/>
          </section>
          <section>
            <h2>TSS</h2>
            <img src='img/ht_tss.png' width='80%' alt='acc'/>
          </section>
        </section>
        <section>
          <section>
            <h1>Fuzzy Logic</h1>
          </section>
          <section>
            <h2>Structure</h2>
            \[\mathbf{If} \mbox{ } antecedants \mbox{ } \mathbf{then} \mbox { } consequents.\]
            \[\mathbf{If} \mbox{ } antecedants \mbox{ } \mathbf{then} \mbox { } consequents.\]
            \[\mathbf{If} \mbox{ } antecedants \mbox{ } \mathbf{then} \mbox { } consequents.\]
            \[...\]

            <br/>
            <br/>

            \[\mathbf{If} \mbox{ } A_0 \land A_1 \land A_2 \land ... \mbox{ } \mathbf{then} \mbox { } C_0.\]
          </section>
          <section>
            <h2>Initial model for I Bartomeus' dataset</h2>
            <ul style='width: 100%'>
              <li><b>If</b> KNN is high <b>then</b> \(I^+\).</li>
              <li><b>If</b> KNN is low <b>then</b> \(I^-\).</li>
            </ul>
            </br>
            <p>\(I^+\) denotes an interaction, \(I^+\) a non-interaction.</p>
          </section>
          <section>
            <h2>Learning rules</h2>
            <ol start='0'>
              <li>Start with the two KNN rules.</li>
              <li>Randomly generate a rule, add it to the knowledge base.</li>
              <li>If the new knowledge base beats the old by \(\alpha\) TSS on the training set, keep the rule.</li>
              <li>Repeat #1-2 \(\phi\) times.</li>
            </ol>
            <br/>
            <br/>
            <p>Starts with high acceptance threshold \(\alpha\), lower it with time.</p>
            <br/>
            <p>C++14 code: <a href='https://github.com/PhDP/Manticore'>https://github.com/PhDP/Manticore</a></p>
          </section>
          <section>
            <ul style='width: 100%; font-size: 80%'>
              <li><b>If</b> Plant nectar tube depth is average <b>then</b> \(I^+\).</li>
              <li><b>If</b> Pollinator body size is small <b>then</b> \(I^+\).</li>
              <li><b>If</b> KNN is high <b>then</b> \(I^+\).</li>
              <li><b>If</b> Pollinator is specialist <b>and</b> Plant nectar tube dim is small <b>then</b> \(I^+\).</li>
              <li><b>If</b> Plant flower width is average <b>then</b> \(I^+\).</li>
              <li><b>If</b> Plant flower width is small <b>and</b> Pollinator tongue length is small <b>then</b> \(I^+\).</li>
              <li><b>If</b> KNN is low <b>then</b> \(I^-\).</li>
            </ul>
          </section>
          <section>
            <ul style='width: 100%; font-size: 70%'>
              <li>[120] <b>If</b> KNN is high <b>then</b> \(I^+\).</li>
              <li>[100] <b>If</b> KNN is low <b>then</b> this pollinator/plant \(I^-\).</li>
              <li>[33] <b>If</b> Pollinator is specialist <b>then</b> \(I^+\).</li>
              <li>[25] <b>If</b> PlantFlowerWidth is small <b>then</b> \(I^+\).</li>
              <li>[25] <b>If</b> PlantFlowerWidth is average <b>then</b> \(I^+\).</li>
              <li>[23] <b>If</b> PlantNectarTubeDepth is average <b>then</b> \(I^+\).</li>
              <li>[21] <b>If</b> PollTongueLength is average <b>then</b> \(I^+\).</li>
              <li>[19] <b>If</b> PollIT is small <b>then</b> \(I^+\).</li>
              <li>[15] <b>If</b> Pollinator is generalist <b>then</b> \(I^+\).</li>
              <li>[14] <b>If</b> PlantNectarTubeDim is average <b>then</b> \(I^+\).</li>
              <li>[14] <b>If</b> PollIT is large <b>then</b> \(I^+\).</li>
              <li>[8] <b>If</b> KNN is low <b>and</b> Pollinator is specialist <b>then</b> \(I^+\).</li>
              <li>[7] <b>If</b> PollTongueLength is small <b>and</b> KNN is high <b>then</b> \(I^+\).</li>
              <li>[6] <b>If</b> PlantNectarTubeDim is average <b>and</b> PlantFlowerWidth is average <b>then</b> \(I^+\).</li>
              <li>[6] <b>If</b> KNN is high <b>and</b> PlantFlowerWidth is average <b>then</b> \(I^+\).</li>
              <li>...</li>
            </ul>
          </section>
          <section>
            <h2>Results on pollinator-plant data-set</h2>
            <table style='width:100%; font-size:80%; text-align:center;'>
              <tr>
                <th>Model</th>
                <th>TSS (10% testing data)</th>
              </tr>
              <tr>
                <td>Decision tree</td>
                <td>0.723</td>
              </tr>
              <tr>
                <td>Random forests</td>
                <td>0.795</td>
              </tr>
              <tr>
                <td>Fuzzy (initial model with two KNN rules)</td>
                <td>0.564</td>
              </tr>
              <tr>
                <td>Fuzzy (after evolution)</td>
                <td>0.885</td>
              </tr>
            </table>
          </section>
        </section>
        <section>
          <section>
            <h1>Markov Logic</h1>
          </section>
          <section>
            \[\forall x, y, z: Friends(x, y) \mbox{ and } Friends(y, z) \Rightarrow Friends(x, z), 0.7.\]
            \[\forall x: Smoking(x) \Rightarrow Cancer(x), 1.5.\]
            \[\forall x, y: Friends(x, y) \mbox{ and } Smoking(x) \Rightarrow Smoking(y), 1.1.\]

            <br/><br/>

            <p>Can answer queries of the form:</p>

            <br/>

            \[P(Cancer(Bob) | Smoking(Anna) \mbox{ and } Friends(Anna, Bob)).\]
            \[P(Friends(x, y) \Leftrightarrow Friends(y, x) | ...).\]

          </section>
          <section>
            <h2>Salix data-set</h2>
            <img src='img/salix.png' alt='salix'/>
            \[Parasites \rightarrow Galler \rightarrow Salix\]
          </section>
          <section>
            <h2>Learning weights (but not really rules)</h2>
\[HighNumSalix(x), 6.44.\]
\[\neg ModerateCooccurrence(x,y), 5.60.\]
\[\neg PreyOnAt(x,y,a3), 4.38.\]
\[\neg HighCooccurrence(x,y), 4.33.\]
\[\neg PresenceAt(x,y), 3.08.\]
\[\neg PreyOn(x,y), 1.68.\]
\[\neg IsSalix(x), 1.38.\]
\[\neg IsGaller(x), 0.59.\]
\[\neg CloselyRelated(x,y), 0.59.\]
\[\neg HigherPhyloValue(x,y), 0.57.\]
          </section>

          <section>
\[ HighNumGaller(x), 0.47\]
\[ HighNumSpecies(x), 0.24.\]
\[ HighFoodWebLinkDensity(x), 0.19.\]
\[ \neg IsParasitoid(x), 0.18.\]
\[ \neg HighFoodWebConnectance(x), 0.14.\]
\[ \neg HighTotalPrecipiration(x), 0.01.\]
\[ \neg HighMeanTemperature(x), 0.01.\]
\[ \neg PreyOn(x,x), 0.01.\]
\[ HighNumParasites(x), 0.00.\]
          </section>

          <section>
\[ PreyOnAt(x,y,z) \Rightarrow PreyOn(x,y), 5.20.\]
\[ HighCooccurrence(x,y) \Rightarrow PreyOn(x,y), 4.22.\]
\[ IsGaller(x) \mbox{ and } PreyOn(x,y) \Rightarrow IsSalix(y), 4.15.\]
\[ IsParasitoid(y) \mbox{ and } PreyOn(y,x) \Rightarrow IsGaller(x), 3.49.\]
\[ PreyOn(x,y) \Rightarrow HighCooccurrence(x,y), 1.57.\]
\[ PreyOn(x,y) \Rightarrow PreyOn(x,x), 1.52.\]
\[ HigherPhyloValue(x,y) \Rightarrow PreyOn(x,y), 1.13.\]
\[ HigherPhyloValue(x,y) \Rightarrow HighCooccurrence(x,y), -0.59.\]
\[ PreyOn(x,x) \Rightarrow PreyOn(x,y), 0.45.\]
\[ \neg IsSalix(x) \mbox{ or } \neg PreyOn(x,y), 0.02.\]
\[ CloselyRelated(x,y) \mbox{ and } PreyOn(x,z) \Rightarrow PreyOn(y,z), 0.00.\]
          </section>
        </section>
        <section>
          <section>
            <h1>Conclusions</h1>
          </section>
          <section>
            <ul width='100%'>
              <li>KNN is an effective, widely applicable, and simple approach.</li>
              <li>KNN with threshold works well with TSS scores.</li>
              <li>Supervised learning algorithms (esp. random forests) can predict interactions with few real-valued traits.</li>
              <li>Fuzzy knowledge bases are both clear and accurate.</li>
              <li>Even a silly revision algorithm yields very good results for fuzzy logic.</li>
              <li>Knowledge representation in ecology is an interesting topic in itself.</li>
              <li>Markov logic has issues (computational) but modern variants could be promising.</li>
            </ul>
          </section>
        </section>
        <section>
          <section>
            <h1>Questions?</h1>
          </section>
        </section>

      </div>
    </div>

    <script src='lib/js/head.min.js'></script>
    <script src='js/reveal.min.js'></script>
    <script>
      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        width: '70%',
        height: '100%',
        margin: 0,
        minScale: 1,
        maxScale: 1,
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });
    </script>
    <script type='text/javascript' src='../../js/bower/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
  </body>
</html>
